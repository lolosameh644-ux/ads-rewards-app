# دليل استخدام تطبيق ربح من الإعلانات

## نظرة عامة

تطبيق **ربح من الإعلانات** هو تطبيق موبايل يتيح للمستخدمين مشاهدة الإعلانات وكسب النقاط التي يمكن تحويلها إلى أموال حقيقية.

## المميزات الرئيسية

### 1. نظام النقاط والأرباح
- كل إعلان = **1 نقطة**
- كل **300 نقطة** = **1 دولار أمريكي**
- الحد الأدنى للسحب: **900 نقطة** (3 دولار)

### 2. طرق السحب المتاحة
- **Instapay** (مصر)
- **Vodafone Cash** (مصر)
- **PayPal** (عالمي)

### 3. لوحة تحكم المدير
- إدارة المستخدمين
- قبول/رفض طلبات السحب
- تعديل نقاط المستخدمين
- عرض الإحصائيات

---

## دليل المستخدم

### التسجيل والدخول

1. افتح التطبيق
2. اضغط على زر "تسجيل الدخول"
3. سجل الدخول باستخدام حساب Google أو البريد الإلكتروني

### مشاهدة الإعلانات

1. انتقل إلى الشاشة الرئيسية (Home)
2. اضغط على زر "شاهد إعلان"
3. شاهد الإعلان حتى النهاية
4. سيتم إضافة نقطة واحدة تلقائياً إلى رصيدك

### سحب الأرباح

1. انتقل إلى شاشة "السحب"
2. تأكد من أن رصيدك 900 نقطة أو أكثر
3. اختر وسيلة السحب (Instapay / Vodafone Cash / PayPal)
4. أدخل عدد النقاط التي تريد سحبها
5. أدخل رقم الهاتف أو البريد الإلكتروني
6. اضغط "إرسال طلب السحب"
7. انتظر مراجعة الطلب من قبل المدير

### تتبع طلبات السحب

في شاشة "السحب"، يمكنك رؤية جميع طلباتك السابقة مع حالتها:
- **قيد المراجعة**: الطلب تحت المراجعة
- **مكتمل**: تم قبول الطلب وتحويل المبلغ
- **مرفوض**: تم رفض الطلب

### الملف الشخصي

في شاشة "الملف الشخصي"، يمكنك:
- عرض معلوماتك الشخصية
- رؤية إحصائياتك (النقاط، الأرباح، الإعلانات)
- تسجيل الخروج

---

## دليل المدير (Admin)

### الوصول إلى لوحة التحكم

1. سجل الدخول بحساب مدير
2. انتقل إلى شاشة "الملف الشخصي"
3. اضغط على زر "لوحة التحكم"

### إدارة طلبات السحب

1. في لوحة التحكم، اختر تبويب "طلبات السحب"
2. ستظهر جميع الطلبات قيد المراجعة
3. لكل طلب، يمكنك:
   - رؤية معلومات المستخدم
   - رؤية عدد النقاط والمبلغ بالدولار
   - رؤية وسيلة السحب ورقم الاتصال
   - **قبول** الطلب: يتم خصم النقاط وتحويل المبلغ
   - **رفض** الطلب: يتم إلغاء الطلب دون خصم النقاط

### إدارة المستخدمين

1. في لوحة التحكم، اختر تبويب "المستخدمين"
2. ستظهر قائمة بجميع المستخدمين
3. لكل مستخدم، يمكنك:
   - رؤية النقاط الحالية
   - رؤية إجمالي الأرباح
   - رؤية عدد الإعلانات المشاهدة
   - **تعديل النقاط**: تغيير رصيد النقاط يدوياً

### الإحصائيات

في أعلى لوحة التحكم، يمكنك رؤية:
- **عدد المستخدمين** الإجمالي
- **إجمالي النقاط** المكتسبة
- **إجمالي المسحوبات**

---

## Unity Ads Integration

التطبيق حالياً يعمل بنظام **محاكاة الإعلانات** للاختبار. لتفعيل Unity Ads الحقيقي:

1. راجع ملف `UNITY_ADS_SETUP.md`
2. اتبع الخطوات لتثبيت Unity Ads SDK
3. أدخل Game ID و Ad Unit ID الخاصين بك
4. اختبر الإعلانات في وضع Test Mode أولاً

**معلومات Unity Ads:**
- Game ID: `6033471`
- Ad Unit ID: `Rewarded_Android`

---

## قاعدة البيانات

التطبيق يستخدم قاعدة بيانات MySQL مع الجداول التالية:

### 1. users
معلومات المستخدمين الأساسية (من نظام المصادقة)

### 2. user_points
- `userId`: معرف المستخدم
- `points`: النقاط الحالية
- `totalEarned`: إجمالي النقاط المكتسبة
- `totalWithdrawn`: إجمالي النقاط المسحوبة

### 3. withdrawal_requests
- `userId`: معرف المستخدم
- `points`: عدد النقاط المطلوب سحبها
- `amountUsd`: المبلغ بالدولار
- `method`: وسيلة السحب (instapay, vodafone_cash, paypal)
- `contactInfo`: رقم الهاتف أو البريد الإلكتروني
- `status`: حالة الطلب (pending, approved, rejected)

### 4. ad_views
- `userId`: معرف المستخدم
- `adId`: معرف الإعلان
- `viewedAt`: تاريخ ووقت المشاهدة

---

## API Endpoints

التطبيق يستخدم tRPC للتواصل مع الخادم. الـ endpoints المتاحة:

### للمستخدمين
- `points.get`: الحصول على نقاط المستخدم
- `points.add`: إضافة نقاط بعد مشاهدة إعلان
- `points.adViews`: الحصول على عدد الإعلانات المشاهدة
- `withdrawal.create`: إنشاء طلب سحب جديد
- `withdrawal.list`: الحصول على طلبات السحب الخاصة بالمستخدم

### للمديرين فقط
- `admin.users`: الحصول على قائمة جميع المستخدمين
- `admin.withdrawals`: الحصول على جميع طلبات السحب
- `admin.updateWithdrawal`: تحديث حالة طلب السحب
- `admin.updateUserPoints`: تعديل نقاط مستخدم

---

## التطوير والاختبار

### تشغيل التطبيق محلياً

```bash
# تثبيت المكتبات
pnpm install

# تشغيل الخادم والتطبيق
pnpm dev

# فتح على Android
pnpm android

# فتح على iOS
pnpm ios
```

### الوصول إلى قاعدة البيانات

يمكنك الوصول إلى قاعدة البيانات من لوحة التحكم في واجهة Manus:
1. افتح لوحة التحكم (Management UI)
2. انتقل إلى تبويب "Database"
3. يمكنك عرض وتعديل البيانات مباشرة

### إنشاء مستخدم مدير

لإنشاء مستخدم مدير، قم بتحديث حقل `role` في جدول `users`:

```sql
UPDATE users SET role = 'admin' WHERE email = 'your-email@example.com';
```

---

## النشر (Deployment)

### خطوات النشر

1. **إنشاء Checkpoint**:
   - تأكد من أن جميع التغييرات محفوظة
   - انقر على "Save Checkpoint" في لوحة التحكم

2. **النشر**:
   - انقر على زر "Publish" في لوحة التحكم
   - سيتم نشر التطبيق تلقائياً

3. **اختبار التطبيق المنشور**:
   - افتح رابط التطبيق على هاتفك
   - اختبر جميع الوظائف

### بناء APK/IPA

لبناء ملفات التطبيق للنشر على Google Play أو App Store:

```bash
# بناء APK لـ Android
eas build --platform android

# بناء IPA لـ iOS
eas build --platform ios
```

---

## الأمان والخصوصية

### حماية البيانات
- جميع البيانات الحساسة محمية بتشفير SSL
- كلمات المرور مشفرة باستخدام bcrypt
- الـ sessions محمية بـ JWT tokens

### صلاحيات المدير
- فقط المستخدمون بـ `role = 'admin'` يمكنهم الوصول إلى لوحة التحكم
- جميع عمليات المدير مسجلة في قاعدة البيانات

### منع الاحتيال
- يتم تسجيل كل مشاهدة إعلان مع التاريخ والوقت
- يمكن للمدير مراجعة سجل الإعلانات لكل مستخدم
- يمكن تحديد حد أقصى للإعلانات اليومية (اختياري)

---

## الدعم والمساعدة

### المشاكل الشائعة

**1. لا يمكنني تسجيل الدخول**
- تأكد من اتصالك بالإنترنت
- حاول مسح cache التطبيق
- تأكد من صحة بيانات الدخول

**2. لم تُضف النقاط بعد مشاهدة الإعلان**
- تأكد من مشاهدة الإعلان حتى النهاية
- تحقق من اتصالك بالإنترنت
- أعد تشغيل التطبيق

**3. طلب السحب مرفوض**
- تواصل مع المدير لمعرفة السبب
- تأكد من صحة معلومات الاتصال

**4. لا يمكنني الوصول إلى لوحة التحكم**
- تأكد من أن حسابك لديه صلاحيات مدير
- تواصل مع المطور لتحديث الصلاحيات

---

## معلومات تقنية

### التقنيات المستخدمة

- **Frontend**: React Native + Expo SDK 54
- **Styling**: NativeWind (Tailwind CSS)
- **Navigation**: Expo Router
- **State Management**: React Query (TanStack Query)
- **API**: tRPC
- **Backend**: Node.js + Express
- **Database**: MySQL + Drizzle ORM
- **Authentication**: OAuth 2.0
- **Ads**: Unity Ads (قابل للتكامل)

### متطلبات النظام

- **Android**: 5.0 (Lollipop) أو أحدث
- **iOS**: 12.0 أو أحدث
- **الإنترنت**: اتصال مستقر مطلوب

---

## الترخيص

هذا التطبيق مطور خصيصاً لك. يمكنك استخدامه وتعديله كما تشاء.

---

## التواصل

للدعم الفني أو الاستفسارات، يرجى التواصل مع المطور.

---

**آخر تحديث**: يناير 2026
**الإصدار**: 1.0.0
